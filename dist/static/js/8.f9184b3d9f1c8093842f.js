webpackJsonp([8],{YOyO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("4YfN"),a=s.n(r),c=s("cJ5B"),i=s("6Xyt"),o=s("qMT5"),n=s("XEAW"),h=s("qwAB"),l=s("9cIF"),u=s("PvFA"),f=s("8stH"),v=s("T452"),y=s("R4Sj"),d={mixins:[s("F4+m").a],name:"Search",components:{searchBox:c.a,Suggest:i.a,SearchList:o.a,Confirm:n.a,Scroll:h.a},data:function(){return{hotSong:[],query:"",vkey:""}},created:function(){this._getHotSong()},computed:a()({shortcutData:function(){return this.hotSong.concat(this.searchHistory)}},Object(y.c)(["searchHistory"])),methods:a()({handlePlaylist:function(t){var e=t.length>0?"60px":"";this.$refs.shortWrapper.style.bottom=e,this.$refs.searchResult.style.bottom=e,this.$refs.suggest.refresh(),this.$refs.shortcut.refresh()},saveSong:function(t){t.type?this.saveSearchHistory(t.singername):this.saveSearchHistory(t.name),this._getSongVkey(t.mid)},clearAllSearch:function(){this.$refs.confirm.show()},removeAll:function(){this.clearAllSearchHistory()},startScroll:function(){this.$refs.searchBox.blur()},changeQuery:function(t){this.query=t},addQuery:function(t){this.$refs.searchBox.addQuery(t)},deleteOne:function(t){this.deleteSearchHistory(t)},_getHotSong:function(){var t=this;Object(f.a)().then(function(e){e.code===v.a&&(t.hotSong=e.data.hotkey.slice(0,10))})},_getSongVkey:function(t){var e=this;Object(l.b)(t).then(function(t){e.vkey=t.req_0.data.midurlinfo[0].purl})}},Object(y.b)(["saveSearchHistory","deleteSearchHistory","clearAllSearchHistory"]),Object(y.d)({SET_CURRENT_URL:"SET_CURRENT_URL"})),watch:{query:function(t){var e=this;t||setTimeout(function(){e.$refs.shortcut.refresh()},20)},vkey:function(){var t=Object(u.c)(this.vkey);this.SET_CURRENT_URL(t),console.log(t)}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box-warpper"},[s("search-box",{ref:"searchBox",on:{query:t.changeQuery}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.query,expression:"!query"}],ref:"shortWrapper",staticClass:"shortcut-wrapper"},[s("scroll",{ref:"shortcut",staticClass:"shortcut",attrs:{data:t.shortcutData}},[s("div",[s("div",{staticClass:"hot-key"},[s("h1",{staticClass:"title"},[t._v("热门搜索")]),t._v(" "),s("ul",t._l(t.hotSong,function(e,r){return s("li",{key:r,staticClass:"item",on:{click:function(s){return t.addQuery(e.k)}}},[s("span",[t._v(t._s(e.k))])])}),0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:this.searchHistory.length,expression:"this.searchHistory.length"}],staticClass:"search-history"},[s("h1",{staticClass:"title"},[s("span",{staticClass:"text"},[t._v("搜索历史")]),t._v(" "),s("span",{staticClass:"clear",on:{click:t.clearAllSearch}},[s("i",{staticClass:"icon-clear"})])]),t._v(" "),s("search-list",{attrs:{searches:t.searchHistory},on:{selectItem:t.addQuery,deleteOne:t.deleteOne}})],1)])])],1),t._v(" "),s("div",{ref:"searchResult",staticClass:"search-result"},[s("suggest",{ref:"suggest",attrs:{query:t.query},on:{select:t.saveSong,startScroll:t.startScroll}})],1),t._v(" "),s("confirm",{ref:"confirm",attrs:{title:"确认要清空搜索历史"},on:{confirm:t.removeAll}}),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var g=s("C7Lr")(d,S,!1,function(t){s("pSnB")},"data-v-29ffa06c",null);e.default=g.exports},pSnB:function(t,e){}});
//# sourceMappingURL=8.f9184b3d9f1c8093842f.js.map